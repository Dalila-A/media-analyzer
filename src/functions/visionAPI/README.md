# Objectives
- Function triggered by a PubSub event from vision topic.
- The message is first analyzed to check if there is any missing or incorrect data.
- If the format is not correct, an error is raised and no call to the API is done.
- If the format is correct, a request is sent to Vision API and the annotations begin.
- When the annotation is done, a result is produced.
- If explicit content is detected, the file will be moved to the flagged bucket.
- If there is no explicit content, the file remains in filtered bucket.
- The result of the annotation is appended to the BigQuery object which will be inserted in the dataset/table.

# Methods
- ``entry_point()``: retrieves the event published in vision topic. The event contains the data about the content generated by GCStoPubsub
- ``validate_input()``: validates the format of the file
- ``annotate_video()``: annotates the image according to the features and produces a result.
- ``create_bqInsertObj()``: creates the BigQuery object to insert into BQ, according to the result 
- ``check_safeSearch_likelihood()``: checks if any explicit content is detected
- ``move_file()``: moves the file from a source bucket to a destination bucket and deletes the file in the source bucket if explicit content is detected
- ``publish_result()``: creates and publishes the message to the bqinsert topic